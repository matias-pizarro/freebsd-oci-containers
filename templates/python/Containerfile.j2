#
# NOTE: THIS DOCKERFILE IS GENERATED VIA "apply-templates.sh"
#
# PLEASE DO NOT EDIT IT DIRECTLY.
#

FROM {% if registry.name %}{{ registry.name }}/{% endif %}{% if registry.username %}{{ registry.username }}/{% endif %}{% if registry.project %}{{ registry.project }}/{% endif %}freebsd-zfs:{{ os_major_version }}.{{ short_os_minor_version }}

RUN set -eux; \
    /usr/bin/env pkg install -yr FreeBSD-ports\
    databases/py-gdbm@py{{ project_major_version }}{{ project_minor_version }} \
    databases/py-sqlite3@py{{ project_major_version }}{{ project_minor_version }} \
    devel/py-pip@py{{ project_major_version }}{{ project_minor_version }} \
    devel/py-setuptools@py{{ project_major_version }}{{ project_minor_version }} \
    devel/py-wheel@py{{ project_major_version }}{{ project_minor_version }} \
    lang/python{{ project_major_version }}{{ project_minor_version }} \
    x11-toolkits/py-tkinter@py{{ project_major_version }}{{ project_minor_version }}; \
    /bin/rm -rf /var/db/pkg/*; \
    /bin/rm -f /var/cache/pkg/*

RUN set -eux; \
    /bin/ln -s /usr/local/bin/pip /usr/local/bin/pip{{ project_major_version }}; \
    /bin/ln -s /usr/local/bin/pip /usr/local/bin/pip{{ project_major_version }}.{{ project_minor_version }};

RUN set -eux; \
    for src in idle{{ project_major_version }}.{{ project_minor_version }} pydoc{{ project_major_version }}.{{ project_minor_version }} python{{ project_major_version }}.{{ project_minor_version }} python{{ project_major_version }}.{{ project_minor_version }}-config; do \
        dst="$(echo "$src" | tr -d .{{ project_minor_version }})"; \
        [ -s "/usr/local/bin/$src" ]; \
        [ ! -e "/usr/local/bin/$dst" ]; \
        ln -sv "$src" "/usr/local/bin/$dst"; \
    done

RUN set -eux; \
    for src in idle{{ project_major_version }} pydoc{{ project_major_version }} python{{ project_major_version }} python{{ project_major_version }}-config; do \
        dst="$(echo "$src" | tr -d 3)"; \
        [ -s "/usr/local/bin/$src" ]; \
        [ ! -e "/usr/local/bin/$dst" ]; \
        ln -sv "$src" "/usr/local/bin/$dst"; \
    done

RUN set -eux; \
    export PYTHONDONTWRITEBYTECODE=1; \
    python{{ project_major_version }} --version; \
    pip{{ project_major_version }} --version

CMD ["python{{ project_major_version }}"]
